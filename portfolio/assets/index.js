import{i18Obj}from"../src/utils/translate.js";import{lightThemeTags}from"../src/utils/light-theme.js";const themeIconSun=document.querySelector(".sun"),themeIconMoon=document.querySelector(".moon");let theme=localStorage.getItem("theme")?localStorage.getItem("theme"):"dark",lang=localStorage.getItem("lang")?localStorage.getItem("lang"):"en";const switchTheme=e=>{lightThemeTags.forEach((t=>{document.querySelectorAll(t).forEach((t=>{"dark"===e&&t.classList.contains("light-theme")?t.classList.remove("light-theme"):"light"!==e||t.classList.contains("light-theme")||t.classList.add("light-theme")}))}))};themeIconSun.addEventListener("click",(()=>{themeIconSun.classList.contains("light-theme")?(theme="dark",switchTheme(theme)):(theme="light",switchTheme(theme))})),themeIconMoon.addEventListener("click",(()=>{themeIconSun.classList.contains("light-theme")?(theme="dark",switchTheme("dark")):(theme="light",switchTheme("light"))}));const languageSwitcher=document.querySelectorAll(".header__languages .language-switcher"),activateRuSwitcher=()=>{const e=document.getElementsByClassName("ru")[0],t=document.getElementsByClassName("en")[0];e.classList.contains("active")||(e.classList.add("active"),t.classList.remove("active"))},activateEnSwitcher=()=>{const e=document.getElementsByClassName("ru")[0],t=document.getElementsByClassName("en")[0];t.classList.contains("active")||(t.classList.add("active"),e.classList.remove("active"))},activateSwitcher=()=>{"en"===lang?activateEnSwitcher():"ru"===lang&&activateRuSwitcher()},addLanguageSwitcherHandler=()=>{document.querySelector(".header__languages").addEventListener("click",(e=>{let t=e.target;"RU"===t.innerText?(lang="ru",activateRuSwitcher()):"EN"===t.innerText&&(lang="en",activateEnSwitcher()),getTranslate(lang)}))},getTranslate=e=>{document.querySelectorAll("[data-i18]").forEach((t=>{t.placeholder&&(t.placeholder=i18Obj[`${e}`][t.dataset.i18],t.textContent=""),t.textContent=i18Obj[`${e}`][t.dataset.i18]}))},changeLanguageClassActive=()=>{[].forEach.call(languageSwitcher,(e=>{e!==this&&e.classList.remove("active")}))};[].forEach.call(languageSwitcher,(e=>{e.addEventListener("click",changeLanguageClassActive,!1)}));const setLocalStorage=()=>{localStorage.setItem("lang",lang),localStorage.setItem("theme",theme)},getLocalStorage=()=>{localStorage.getItem("lang")&&getTranslate(localStorage.getItem("lang")),localStorage.getItem("theme")&&switchTheme(localStorage.getItem("theme")),"en"===lang?activateEnSwitcher():"ru"===lang&&activateRuSwitcher()};window.addEventListener("beforeunload",setLocalStorage),window.addEventListener("load",(()=>{localStorage.getItem("lang")&&getTranslate(localStorage.getItem("lang")),localStorage.getItem("theme")&&switchTheme(localStorage.getItem("theme")),"en"===lang?activateEnSwitcher():"ru"===lang&&activateRuSwitcher(),document.querySelector(".header__languages").addEventListener("click",(e=>{let t=e.target;"RU"===t.innerText?(lang="ru",activateRuSwitcher()):"EN"===t.innerText&&(lang="en",activateEnSwitcher()),getTranslate(lang)}))}));const hamburger=document.querySelector(".hamburger"),navList=document.querySelector(".nav-list"),navLinks=document.querySelectorAll(".nav-link"),toggleMenu=()=>{hamburger.classList.toggle("open"),navList.classList.toggle("open")};hamburger.addEventListener("click",toggleMenu);const closeMenu=e=>{e.target.classList.contains("nav-link")&&(hamburger.classList.remove("open"),navList.classList.remove("open"))};navLinks.forEach((e=>e.addEventListener("click",closeMenu)));const portfolioBtn=document.querySelectorAll(".portfolio__buttons > button"),portfolioWinterBtn=document.querySelector(".portfolio__buttons .winter_button"),portfolioSummerBtn=document.querySelector(".portfolio__buttons .summer_button"),portfolioSpringBtn=document.querySelector(".portfolio__buttons .spring_button"),portfolioAutumnBtn=document.querySelector(".portfolio__buttons .autumn_button"),portfolioImages=document.querySelectorAll(".portfolio__foto"),switchActiveSeasonBtn=e=>{portfolioBtn.forEach((t=>{t.classList.contains(e)?t.classList.contains("active")||t.classList.add("active"):t.classList.contains("active")&&t.classList.remove("active")}))};portfolioWinterBtn.addEventListener("click",(()=>{switchActiveSeasonBtn("winter_button"),portfolioImages.forEach(((e,t)=>e.style.backgroundImage=`url(assets/img/winter/${t+1}.jpg)`))})),portfolioSummerBtn.addEventListener("click",(()=>{switchActiveSeasonBtn("summer_button"),portfolioImages.forEach(((e,t)=>e.style.backgroundImage=`url(assets/img/summer/${t+1}.jpg)`))})),portfolioSpringBtn.addEventListener("click",(()=>{switchActiveSeasonBtn("spring_button"),portfolioImages.forEach(((e,t)=>e.style.backgroundImage=`url(assets/img/spring/${t+1}.jpg)`))})),portfolioAutumnBtn.addEventListener("click",(()=>{switchActiveSeasonBtn("autumn_button"),portfolioImages.forEach(((e,t)=>e.style.backgroundImage=`url(assets/img/autumn/${t+1}.jpg)`))}));const videoBlock=document.getElementsByClassName("video__player")[0],video=document.getElementsByClassName("video__video")[0],videoBtn=videoBlock.getElementsByClassName("video__button")[0],videoPoster=videoBlock.getElementsByClassName("video__foto")[0],toggle=videoBlock.getElementsByClassName("toggle")[0],volume=videoBlock.getElementsByClassName("volume")[0],progressInput=videoBlock.getElementsByClassName("video__slider_progress")[0],volumeInput=videoBlock.getElementsByClassName("video__slider_volume")[0];let tempVolume;const togglePlay=()=>{const e=video.paused?"play":"pause";video[e]()},handleBigPlayBtn=()=>{video.paused&&videoBtn.classList.contains("video__button_hidden")?videoBtn.classList.remove("video__button_hidden"):video.paused||videoBtn.classList.contains("video__button_hidden")||videoBtn.classList.add("video__button_hidden")},handleSmallPlayBtn=()=>{video.paused||!toggle.classList.contains("video__player-icon_play")||toggle.classList.contains("video__player-icon_paused")?!video.paused||toggle.classList.contains("video__player-icon_play")||toggle.classList.contains("video__player-icon_paused")||(toggle.classList.remove("video__player-icon_pause"),toggle.classList.add("video__player-icon_play")):(toggle.classList.remove("video__player-icon_play"),toggle.classList.add("video__player-icon_pause"))},handleVolumeBtn=()=>{volume.classList.contains("video__player-icon_volume")&&!volume.classList.contains("video__player-icon_mute")?(tempVolume=video.volume,video.volume=0,volumeInput.background=`linear-gradient(to right, #bdae82 0%, #bdae82 ${video.volume}%, #b3b3b3 ${video.volume}%, #b3b3b3 100%)`,mute()):!volume.classList.contains("video__player-icon_volume")&&volume.classList.contains("video__player-icon_mute")&&(video.volume=tempVolume,unmute())},unmute=()=>{volume.classList.remove("video__player-icon_mute"),volume.classList.add("video__player-icon_volume")},mute=()=>{volume.classList.remove("video__player-icon_volume"),volume.classList.add("video__player-icon_mute")},handlePlayBtns=()=>{togglePlay(),video.paused&&videoBtn.classList.contains("video__button_hidden")?videoBtn.classList.remove("video__button_hidden"):video.paused||videoBtn.classList.contains("video__button_hidden")||videoBtn.classList.add("video__button_hidden"),video.paused||!toggle.classList.contains("video__player-icon_play")||toggle.classList.contains("video__player-icon_paused")?!video.paused||toggle.classList.contains("video__player-icon_play")||toggle.classList.contains("video__player-icon_paused")||(toggle.classList.remove("video__player-icon_pause"),toggle.classList.add("video__player-icon_play")):(toggle.classList.remove("video__player-icon_play"),toggle.classList.add("video__player-icon_pause"))};videoBtn.addEventListener("click",(()=>{videoPoster.classList.contains("video__foto_hidden")||videoPoster.classList.add("video__foto_hidden"),handlePlayBtns(),setVolume()})),video.addEventListener("click",(()=>{handlePlayBtns()})),toggle.addEventListener("click",(()=>{handlePlayBtns()})),volume.addEventListener("click",(()=>{volume.classList.contains("video__player-icon_volume")&&!volume.classList.contains("video__player-icon_mute")?(tempVolume=video.volume,video.volume=0,volumeInput.background=`linear-gradient(to right, #bdae82 0%, #bdae82 ${video.volume}%, #b3b3b3 ${video.volume}%, #b3b3b3 100%)`,mute()):!volume.classList.contains("video__player-icon_volume")&&volume.classList.contains("video__player-icon_mute")&&(video.volume=tempVolume,unmute())}));const scrubVideoDuration=e=>{const t=e.offsetX/progressInput.offsetWidth*video.duration;video.currentTime=t},handleProgress=()=>{const e=video.currentTime/video.duration*100;progressInput.value=`${e}`,progressInput.style.background=`linear-gradient(to right, #bdae82 0%, #bdae82 ${e+1}%, #b3b3b3 ${e+1}%, #b3b3b3 100%)`},handleVolume=()=>{const e=100*video.volume;0===e?mute():unmute(),volumeInput.value=`${e}`,volumeInput.style.background=`linear-gradient(to right, #bdae82 0%, #bdae82 ${e}%, #b3b3b3 ${e}%, #b3b3b3 100%)`},setVolume=()=>{video.volume=.4,volumeInput.style.background="linear-gradient(to right, #bdae82 0%, #bdae82 40%, #b3b3b3 40%, #b3b3b3 100%)"};video.addEventListener("timeupdate",handleProgress),video.addEventListener("volumechange",handleVolume),progressInput.addEventListener("click",scrubVideoDuration),progressInput.addEventListener("input",(function(){const e=this.value;this.style.background=`linear-gradient(to right, #bdae82 0%, #bdae82 ${e}%, #b3b3b3 ${e}%, #b3b3b3 100%)`})),volumeInput.addEventListener("input",(function(){const e=this.value;video.volume=e/100,this.style.background=`linear-gradient(to right, #bdae82 0%, #bdae82 ${e}%, #b3b3b3 ${e}%, #b3b3b3 100%)`}));